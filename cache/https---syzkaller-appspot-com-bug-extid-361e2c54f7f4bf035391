

<!doctype html>
<html>
<head>
	
	<link rel="stylesheet" href="/static/style.css"/>
	<script src="/static/common.js"></script>
	
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116117799-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() { dataLayer.push(arguments); }
			gtag('js', new Date());
			gtag('config', 'UA-116117799-1');
		</script>
	

	<title>possible deadlock in rpm_suspend</title>
</head>
<body>
	
	<header id="topbar">
		<table class="position_table">
			<tr>
				<td>
					<h1><a href="/upstream">syzbot</a></h1>
				</td>
				<td class="namespace_td">
					<select class="namespace" onchange="window.location.href = '/' + this.value + '';">
						
							<option value="android-5-10" >Android 5.10</option>
							<option value="android-5-15" >Android 5.15</option>
							<option value="android-54" >Android 5.4</option>
							<option value="android-6-1" >Android 6.1</option>
							<option value="freebsd" >FreeBSD</option>
							<option value="upstream" selected="1">Linux</option>
							<option value="linux-5.15" >Linux 5.15</option>
							<option value="linux-6.1" >Linux 6.1</option>
							<option value="netbsd" >NetBSD</option>
							<option value="openbsd" >OpenBSD</option>
							<option value="gvisor" >gVisor</option></select>
				</td>
				<td class="search">
					
					
						<a href="https://syzkaller.appspot.com/_ah/conflogin?continue=https://syzkaller.appspot.com/bug%3Fextid%3D361e2c54f7f4bf035391">sign-in</a> |
					
					<a href="https://groups.google.com/forum/#!forum/syzkaller" target="_blank">mailing list</a> |
					<a href="https://github.com/google/syzkaller" target="_blank">source</a> |
					<a href="https://github.com/google/syzkaller/blob/master/docs/syzbot.md" target="_blank">docs</a>
				</td>
			</tr>
		</table>
		
		<div class="navigation">
			<div class="navigation_tab">
				<a href='/upstream'><span style="color:DeepPink;">üêû</span> Open [1659]</a>
			</div>

			
			<div class="navigation_tab">
				<a href='/upstream/subsystems'><span style="color:DeepPink;">‚â°</span> Subsystems</a>
			</div>
			

			<div class="navigation_tab">
				<a href='/upstream/fixed'><span style="color:ForestGreen;">üêû</span> Fixed [6081]</a>
			</div>

			<div class="navigation_tab" href='/upstream/invalid'>
				<a href='/upstream/invalid'><span style="color:RoyalBlue;">üêû</span> Invalid [15101]</a>
			</div>

			
			<div class="navigation_tab">
				<a href='/upstream/backports'><span style="color:ForestGreen;">‚¨á</span> Missing Backports [157]</a>
			</div>
			

			<div class="navigation_tab">
				<a href='/upstream/graph/crashes'><span style="color:ForestGreen;">‚â°</span> Crashes</a>
			</div>

			<div class="dropdown navigation_tab">
				<button class="dropbtn"><span style="color:DarkOrange;">üìà</span>Graphs</button>
				<div class="dropdown-content">
					<a class="navigation_tab"
						href='/upstream/graph/bugs'>Kernel&nbsp;Health</a>
					<a class="navigation_tab"
						href='/upstream/graph/found-bugs'>Bugs/Month</a>
					<a class="navigation_tab"
						href='/upstream/graph/lifetimes'>Bug&nbsp;Lifetimes</a>
					<a class="navigation_tab"
						href='/upstream/graph/fuzzing'>Fuzzing</a>
				</div>
			</div>

			
			<div class="dropdown navigation_tab">
				<button class="dropbtn"><span style="color:DarkOrange;">üìà</span>Coverage</button>
				<div class="dropdown-content">
					<a class="navigation_tab"
						href="/upstream/graph/coverage?period=quarter">Total</a>
					<a class="navigation_tab"
						href="/upstream/coverage?period=month">Repo&nbsp;Heatmap</a>
					
						<a class="navigation_tab"
							href="/upstream/coverage/subsystems?period=month">Subsystems&nbsp;Heatmap</a>
					
				</div>
			</div>
			
			
			<div class="navigation_tab navigation_right">
				<a href='mailto:syzkaller@googlegroups.com'><span style="color:ForestGreen;">üí¨</span> Send us feedback</a>
			</div>
			
		</div>
		
	</header>
	<br>


	<b>possible deadlock in rpm_suspend</b><br><br>
	Status: <a href="https://groups.google.com/d/msgid/syzkaller-bugs/6767d3f5.050a0220.226966.001e.GAE@google.com">upstream: reported C repro on 2024/12/22 08:55</a><br>
	
		
			Subsystems: 
				<span class="bug-label"><a href="/upstream/s/pm">pm</a></span>
		<br>
		
	<a href="https://github.com/google/syzkaller/blob/master/docs/syzbot.md#labels">[Documentation on labels]</a><br>
	
	
	Reported-by: syzbot&#43;361e2c54f7f4bf035391@syzkaller.appspotmail.com<br>
	
	First crash: 77d, last: 54d<br>
	
	<div>
		<div class="bug-bisection-info">

	
	
	
		
			<b>Cause bisection: the issue happens on the oldest tested release</b>
		
		<b>(<a href="https://syzkaller.appspot.com/x/bisect.txt?x=179056df980000">bisect log</a>)</b><br>
	
	
		Crash: <a href="https://syzkaller.appspot.com/x/report.txt?x=145056df980000">WARNING in check_flush_dependency</a> (<a href="https://syzkaller.appspot.com/x/log.txt?x=105056df980000">log</a>)<br>
		Repro: <a href="/text?tag=ReproC&x=16491818580000">C</a>
		<a href="/text?tag=ReproSyz&x=136beaf8580000">syz</a>
		<a href="/text?tag=KernelConfig&x=9c90bb7161a56c88">.config</a><br>
	

	
	&nbsp;&nbsp;
	

</div>
		
		<div class="bug-bisection-stop"></div>
	</div>

	
	<div class="collapsible collapsible-show">
		<div class="head">
			<span class="show-icon">&#9654;</span>
			<span class="hide-icon">&#9660;</span>
			<span>Discussions (2)</span>
		</div>
		<div class="content">
			
			
			

<table class="list_table">
	<thead>
	<tr>
		<th>Title</th>
		<th>Replies (including bot)</th>
		<th>Last reply</th>
	</tr>
	</thead>
	<tbody>
	
		<tr>
			<td><a href="https://lore.kernel.org/all/678a7089.050a0220.303755.0006.GAE@google.com/T/">[syzbot] Monthly pm report (Jan 2025)</a></td>
			<td class="stat">0 (1)</td>
			<td class="stat">2025/01/17 15:00</td>
		</tr>
	
		<tr>
			<td><a href="https://lore.kernel.org/all/6767d3f5.050a0220.226966.001e.GAE@google.com/T/">[syzbot] [pm?] possible deadlock in rpm_suspend</a></td>
			<td class="stat">1 (4)</td>
			<td class="stat">2025/01/03 11:13</td>
		</tr>
	
	</tbody>
</table>


			
			
		</div>
	</div>
	
	<div class="collapsible collapsible-hide">
		<div class="head">
			<span class="show-icon">&#9654;</span>
			<span class="hide-icon">&#9660;</span>
			<span>Last patch testing requests (2)</span>
		</div>
		<div class="content">
			
			

	<table class="list_table">
		<caption id="jobs"><a class="plain" href="#jobs"></a></caption>
		<thead>
		<tr>
			
			<th>Created</th>
			<th>Duration</th>
			<th>User</th>
			<th>Patch</th>
			<th>Repo</th>
			
			<th>Result</th>
		</tr>
		</thead>
		<tbody>
		
			<tr>
				
				<td class="time">2025/01/24 10:14</td>
				<td class="time" title="started: 2025/01/24 10:14&#013;finished: 2025/01/24 10:29">
					15m
				</td>
				<td>
					
						retest repro
					
				</td>
				<td></td>
				<td class="kernel" title="linux-next"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/commit/?id=5ffa57f6eecefababb8cbe327222ef171943b183">linux-next</a></td>
				
				<td class="result">
					
						<a href="https://syzkaller.appspot.com/x/error.txt?x=13578e18580000">error</a>
					
					
					
					
					
				</td>
			</tr>
		
			<tr>
				
				<td class="time">2025/01/03 10:43</td>
				<td class="time" title="started: 2025/01/03 10:43&#013;finished: 2025/01/03 11:12">
					29m
				</td>
				<td>
					
						hdanton@sina.com
					
				</td>
				<td><a href="/text?tag=Patch&x=11fd96c4580000">patch</a></td>
				<td class="kernel" title="linux-next"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/commit/?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2">linux-next</a></td>
				
				<td class="result">
					
						OK
						
					
					
					
						<a href="https://syzkaller.appspot.com/x/log.txt?x=13e326f8580000">log</a>
					
					
					
				</td>
			</tr>
		
		</tbody>
	</table>


			
			
			
		</div>
	</div>
	

	
	<br><b>Sample crash report:</b><br>
	<div id="crash_div"><pre>------------[ cut here ]------------
======================================================
WARNING: possible circular locking dependency detected
6.13.0-rc3-next-20241220-syzkaller #0 Not tainted
------------------------------------------------------
kworker/0:0/8 is trying to acquire lock:
ffffffff8e813700 (console_owner){....}-{0:0}, at: console_trylock_spinning <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2048'>kernel/printk/printk.c:2048</a> [inline]
ffffffff8e813700 (console_owner){....}-{0:0}, at: vprintk_emit+0x530/0xa10 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2431'>kernel/printk/printk.c:2431</a>

but task is already holding lock:
ffff8880b863e118 (&amp;pool-&gt;lock){-.-.}-{2:2}, at: start_flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4148'>kernel/workqueue.c:4148</a> [inline]
ffff8880b863e118 (&amp;pool-&gt;lock){-.-.}-{2:2}, at: __flush_work+0x1b0/0xc60 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4199'>kernel/workqueue.c:4199</a>

which lock already depends on the new lock.


the existing dependency chain (in reverse order) is:

-&gt; #3 (&amp;pool-&gt;lock){-.-.}-{2:2}:
       lock_acquire+0x1ed/0x550 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n5849'>kernel/locking/lockdep.c:5849</a>
       __raw_spin_lock <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/spinlock_api_smp.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n133'>include/linux/spinlock_api_smp.h:133</a> [inline]
       _raw_spin_lock+0x2e/0x40 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/spinlock.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n154'>kernel/locking/spinlock.c:154</a>
       __queue_work+0x759/0xf50
       queue_work_on+0x1c2/0x380 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2390'>kernel/workqueue.c:2390</a>
       queue_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/workqueue.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n662'>include/linux/workqueue.h:662</a> [inline]
       rpm_suspend+0xe70/0x1730 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/power/runtime.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n662'>drivers/base/power/runtime.c:662</a>
       __pm_runtime_idle+0x131/0x1a0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/power/runtime.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1104'>drivers/base/power/runtime.c:1104</a>
       pm_runtime_put <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/pm_runtime.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n448'>include/linux/pm_runtime.h:448</a> [inline]
       __device_attach+0x3e5/0x520 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/dd.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1048'>drivers/base/dd.c:1048</a>
       bus_probe_device+0x189/0x260 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/bus.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n534'>drivers/base/bus.c:534</a>
       device_add+0x856/0xbf0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/core.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3665'>drivers/base/core.c:3665</a>
       serial_base_port_add+0x2b6/0x3f0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/serial_base_bus.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n179'>drivers/tty/serial/serial_base_bus.c:179</a>
       serial_core_port_device_add <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/serial_core.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3344'>drivers/tty/serial/serial_core.c:3344</a> [inline]
       serial_core_register_port+0x377/0x2870 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/serial_core.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3383'>drivers/tty/serial/serial_core.c:3383</a>
       serial8250_register_8250_port+0x1545/0x1ec0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/8250/8250_core.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n820'>drivers/tty/serial/8250/8250_core.c:820</a>
       serial_pnp_probe+0x4f9/0x9d0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/8250/8250_pnp.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n490'>drivers/tty/serial/8250/8250_pnp.c:490</a>
       pnp_device_probe+0x2ba/0x460 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/pnp/driver.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n111'>drivers/pnp/driver.c:111</a>
       really_probe+0x2b9/0xad0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/dd.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n658'>drivers/base/dd.c:658</a>
       __driver_probe_device+0x1a2/0x390 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/dd.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n800'>drivers/base/dd.c:800</a>
       driver_probe_device+0x50/0x430 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/dd.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n830'>drivers/base/dd.c:830</a>
       __driver_attach+0x45f/0x710 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/dd.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1216'>drivers/base/dd.c:1216</a>
       bus_for_each_dev+0x239/0x2b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/bus.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n370'>drivers/base/bus.c:370</a>
       bus_add_driver+0x346/0x670 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/bus.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n675'>drivers/base/bus.c:675</a>
       driver_register+0x23a/0x320 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/driver.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n246'>drivers/base/driver.c:246</a>
       serial8250_init+0xc1/0x1c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/8250/8250_platform.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n324'>drivers/tty/serial/8250/8250_platform.c:324</a>
       do_one_initcall+0x248/0x870 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/init/main.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1267'>init/main.c:1267</a>
       do_initcall_level+0x157/0x210 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/init/main.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1329'>init/main.c:1329</a>
       do_initcalls+0x3f/0x80 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/init/main.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1345'>init/main.c:1345</a>
       kernel_init_freeable+0x435/0x5d0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/init/main.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1578'>init/main.c:1578</a>
       kernel_init+0x1d/0x2b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/init/main.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1467'>init/main.c:1467</a>
       ret_from_fork+0x4b/0x80 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/kernel/process.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n148'>arch/x86/kernel/process.c:148</a>
       ret_from_fork_asm+0x1a/0x30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/entry/entry_64.S?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n244'>arch/x86/entry/entry_64.S:244</a>

-&gt; #2 (&amp;dev-&gt;power.lock){-.-.}-{3:3}:
       lock_acquire+0x1ed/0x550 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n5849'>kernel/locking/lockdep.c:5849</a>
       __raw_spin_lock_irqsave <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/spinlock_api_smp.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n110'>include/linux/spinlock_api_smp.h:110</a> [inline]
       _raw_spin_lock_irqsave+0xd5/0x120 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/spinlock.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n162'>kernel/locking/spinlock.c:162</a>
       __pm_runtime_resume+0x112/0x180 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/base/power/runtime.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1171'>drivers/base/power/runtime.c:1171</a>
       pm_runtime_get <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/pm_runtime.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n396'>include/linux/pm_runtime.h:396</a> [inline]
       __uart_start+0x17c/0x450 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/serial_core.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n148'>drivers/tty/serial/serial_core.c:148</a>
       uart_write+0x280/0xa40 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/serial_core.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n635'>drivers/tty/serial/serial_core.c:635</a>
       process_output_block <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/n_tty.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n574'>drivers/tty/n_tty.c:574</a> [inline]
       n_tty_write+0xd62/0x1230 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/n_tty.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2389'>drivers/tty/n_tty.c:2389</a>
       iterate_tty_write <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/tty_io.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1015'>drivers/tty/tty_io.c:1015</a> [inline]
       file_tty_write+0x546/0x9b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/tty_io.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1090'>drivers/tty/tty_io.c:1090</a>
       new_sync_write <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/read_write.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n586'>fs/read_write.c:586</a> [inline]
       vfs_write+0xacf/0xd10 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/read_write.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n679'>fs/read_write.c:679</a>
       ksys_write+0x18f/0x2b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/read_write.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n731'>fs/read_write.c:731</a>
       do_syscall_x64 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/entry/common.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n52'>arch/x86/entry/common.c:52</a> [inline]
       do_syscall_64+0xf3/0x230 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/entry/common.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n83'>arch/x86/entry/common.c:83</a>
       entry_SYSCALL_64_after_hwframe+0x77/0x7f

-&gt; #1 (&amp;port_lock_key){-.-.}-{3:3}:
       lock_acquire+0x1ed/0x550 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n5849'>kernel/locking/lockdep.c:5849</a>
       __raw_spin_lock_irqsave <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/spinlock_api_smp.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n110'>include/linux/spinlock_api_smp.h:110</a> [inline]
       _raw_spin_lock_irqsave+0xd5/0x120 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/spinlock.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n162'>kernel/locking/spinlock.c:162</a>
       uart_port_lock_irqsave <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/serial_core.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n715'>include/linux/serial_core.h:715</a> [inline]
       serial8250_console_write+0x1a7/0x1ed0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/8250/8250_port.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3372'>drivers/tty/serial/8250/8250_port.c:3372</a>
       console_emit_next_record <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3122'>kernel/printk/printk.c:3122</a> [inline]
       console_flush_all+0x86b/0xeb0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3210'>kernel/printk/printk.c:3210</a>
       __console_flush_and_unlock <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3269'>kernel/printk/printk.c:3269</a> [inline]
       console_unlock+0x14f/0x3b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3309'>kernel/printk/printk.c:3309</a>
       vprintk_emit+0x730/0xa10 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2432'>kernel/printk/printk.c:2432</a>
       _printk+0xd5/0x120 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2457'>kernel/printk/printk.c:2457</a>
       register_console+0xbf5/0xfd0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4099'>kernel/printk/printk.c:4099</a>
       univ8250_console_init+0x52/0x90 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/tty/serial/8250/8250_core.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n513'>drivers/tty/serial/8250/8250_core.c:513</a>
       console_init+0x1b8/0x6f0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4292'>kernel/printk/printk.c:4292</a>
       start_kernel+0x2dd/0x510 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/init/main.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n1038'>init/main.c:1038</a>
       x86_64_start_reservations+0x2a/0x30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/kernel/head64.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n515'>arch/x86/kernel/head64.c:515</a>
       x86_64_start_kernel+0x9f/0xa0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/kernel/head64.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n496'>arch/x86/kernel/head64.c:496</a>
       common_startup_64+0x13e/0x147

-&gt; #0 (console_owner){....}-{0:0}:
       check_prev_add <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3161'>kernel/locking/lockdep.c:3161</a> [inline]
       check_prevs_add <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3280'>kernel/locking/lockdep.c:3280</a> [inline]
       validate_chain+0x18ef/0x5920 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3904'>kernel/locking/lockdep.c:3904</a>
       __lock_acquire+0x1397/0x2100 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n5226'>kernel/locking/lockdep.c:5226</a>
       lock_acquire+0x1ed/0x550 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n5849'>kernel/locking/lockdep.c:5849</a>
       console_trylock_spinning <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2048'>kernel/printk/printk.c:2048</a> [inline]
       vprintk_emit+0x54d/0xa10 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2431'>kernel/printk/printk.c:2431</a>
       _printk+0xd5/0x120 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2457'>kernel/printk/printk.c:2457</a>
       __warn_printk+0x237/0x360 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/panic.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n794'>kernel/panic.c:794</a>
       check_flush_dependency+0x328/0x3c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3708'>kernel/workqueue.c:3708</a>
       start_flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4162'>kernel/workqueue.c:4162</a> [inline]
       __flush_work+0x286/0xc60 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4199'>kernel/workqueue.c:4199</a>
       flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4256'>kernel/workqueue.c:4256</a> [inline]
       flush_delayed_work+0x169/0x1c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4278'>kernel/workqueue.c:4278</a>
       hfs_file_fsync+0xea/0x140 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/hfs/inode.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n680'>fs/hfs/inode.c:680</a>
       generic_write_sync <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/fs.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2952'>include/linux/fs.h:2952</a> [inline]
       dio_complete+0x55c/0x6b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/direct-io.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n313'>fs/direct-io.c:313</a>
       process_one_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3229'>kernel/workqueue.c:3229</a> [inline]
       process_scheduled_works+0xa66/0x1840 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3310'>kernel/workqueue.c:3310</a>
       worker_thread+0x870/0xd30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3391'>kernel/workqueue.c:3391</a>
       kthread+0x7a9/0x920 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/kthread.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n464'>kernel/kthread.c:464</a>
       ret_from_fork+0x4b/0x80 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/kernel/process.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n148'>arch/x86/kernel/process.c:148</a>
       ret_from_fork_asm+0x1a/0x30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/entry/entry_64.S?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n244'>arch/x86/entry/entry_64.S:244</a>

other info that might help us debug this:

Chain exists of:
  console_owner --&gt; &amp;dev-&gt;power.lock --&gt; &amp;pool-&gt;lock

 Possible unsafe locking scenario:

       CPU0                    CPU1
       ----                    ----
  lock(&amp;pool-&gt;lock);
                               lock(&amp;dev-&gt;power.lock);
                               lock(&amp;pool-&gt;lock);
  lock(console_owner);

 *** DEADLOCK ***

5 locks held by kworker/0:0/8:
 #0: ffff8880325f5d48 ((wq_completion)dio/loop4){+.+.}-{0:0}, at: process_one_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3204'>kernel/workqueue.c:3204</a> [inline]
 #0: ffff8880325f5d48 ((wq_completion)dio/loop4){+.+.}-{0:0}, at: process_scheduled_works+0x93b/0x1840 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3310'>kernel/workqueue.c:3310</a>
 #1: ffffc900000d7c60 ((work_completion)(&amp;dio-&gt;complete_work)){+.+.}-{0:0}, at: process_one_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3205'>kernel/workqueue.c:3205</a> [inline]
 #1: ffffc900000d7c60 ((work_completion)(&amp;dio-&gt;complete_work)){+.+.}-{0:0}, at: process_scheduled_works+0x976/0x1840 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3310'>kernel/workqueue.c:3310</a>
 #2: ffff88807b1a29a0 (&amp;sb-&gt;s_type-&gt;i_mutex_key#15){+.+.}-{4:4}, at: inode_lock <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/fs.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n863'>include/linux/fs.h:863</a> [inline]
 #2: ffff88807b1a29a0 (&amp;sb-&gt;s_type-&gt;i_mutex_key#15){+.+.}-{4:4}, at: hfs_file_fsync+0x95/0x140 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/hfs/inode.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n673'>fs/hfs/inode.c:673</a>
 #3: ffffffff8e937da0 (rcu_read_lock){....}-{1:3}, at: rcu_lock_acquire <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/rcupdate.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n337'>include/linux/rcupdate.h:337</a> [inline]
 #3: ffffffff8e937da0 (rcu_read_lock){....}-{1:3}, at: rcu_read_lock <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/rcupdate.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n849'>include/linux/rcupdate.h:849</a> [inline]
 #3: ffffffff8e937da0 (rcu_read_lock){....}-{1:3}, at: start_flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4141'>kernel/workqueue.c:4141</a> [inline]
 #3: ffffffff8e937da0 (rcu_read_lock){....}-{1:3}, at: __flush_work+0xe9/0xc60 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4199'>kernel/workqueue.c:4199</a>
 #4: ffff8880b863e118 (&amp;pool-&gt;lock){-.-.}-{2:2}, at: start_flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4148'>kernel/workqueue.c:4148</a> [inline]
 #4: ffff8880b863e118 (&amp;pool-&gt;lock){-.-.}-{2:2}, at: __flush_work+0x1b0/0xc60 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4199'>kernel/workqueue.c:4199</a>

stack backtrace:
CPU: 0 UID: 0 PID: 8 Comm: kworker/0:0 Not tainted 6.13.0-rc3-next-20241220-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 09/13/2024
Workqueue: dio/loop4 dio_aio_complete_work
Call Trace:
 &lt;TASK&gt;
 __dump_stack <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/lib/dump_stack.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n94'>lib/dump_stack.c:94</a> [inline]
 dump_stack_lvl+0x241/0x360 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/lib/dump_stack.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n120'>lib/dump_stack.c:120</a>
 print_circular_bug+0x13a/0x1b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2074'>kernel/locking/lockdep.c:2074</a>
 check_noncircular+0x36a/0x4a0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2206'>kernel/locking/lockdep.c:2206</a>
 check_prev_add <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3161'>kernel/locking/lockdep.c:3161</a> [inline]
 check_prevs_add <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3280'>kernel/locking/lockdep.c:3280</a> [inline]
 validate_chain+0x18ef/0x5920 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3904'>kernel/locking/lockdep.c:3904</a>
 __lock_acquire+0x1397/0x2100 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n5226'>kernel/locking/lockdep.c:5226</a>
 lock_acquire+0x1ed/0x550 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/locking/lockdep.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n5849'>kernel/locking/lockdep.c:5849</a>
 console_trylock_spinning <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2048'>kernel/printk/printk.c:2048</a> [inline]
 vprintk_emit+0x54d/0xa10 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2431'>kernel/printk/printk.c:2431</a>
 _printk+0xd5/0x120 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/printk/printk.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2457'>kernel/printk/printk.c:2457</a>
 __warn_printk+0x237/0x360 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/panic.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n794'>kernel/panic.c:794</a>
 check_flush_dependency+0x328/0x3c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3708'>kernel/workqueue.c:3708</a>
 start_flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4162'>kernel/workqueue.c:4162</a> [inline]
 __flush_work+0x286/0xc60 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4199'>kernel/workqueue.c:4199</a>
 flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4256'>kernel/workqueue.c:4256</a> [inline]
 flush_delayed_work+0x169/0x1c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4278'>kernel/workqueue.c:4278</a>
 hfs_file_fsync+0xea/0x140 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/hfs/inode.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n680'>fs/hfs/inode.c:680</a>
 generic_write_sync <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/fs.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2952'>include/linux/fs.h:2952</a> [inline]
 dio_complete+0x55c/0x6b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/direct-io.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n313'>fs/direct-io.c:313</a>
 process_one_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3229'>kernel/workqueue.c:3229</a> [inline]
 process_scheduled_works+0xa66/0x1840 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3310'>kernel/workqueue.c:3310</a>
 worker_thread+0x870/0xd30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3391'>kernel/workqueue.c:3391</a>
 kthread+0x7a9/0x920 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/kthread.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n464'>kernel/kthread.c:464</a>
 ret_from_fork+0x4b/0x80 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/kernel/process.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n148'>arch/x86/kernel/process.c:148</a>
 ret_from_fork_asm+0x1a/0x30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/entry/entry_64.S?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n244'>arch/x86/entry/entry_64.S:244</a>
 &lt;/TASK&gt;
workqueue: WQ_MEM_RECLAIM dio/loop4:dio_aio_complete_work is flushing !WQ_MEM_RECLAIM events_long:flush_mdb
WARNING: CPU: 0 PID: 8 at <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3712'>kernel/workqueue.c:3712</a> check_flush_dependency+0x329/0x3c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3708'>kernel/workqueue.c:3708</a>
Modules linked in:
CPU: 0 UID: 0 PID: 8 Comm: kworker/0:0 Not tainted 6.13.0-rc3-next-20241220-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 09/13/2024
Workqueue: dio/loop4 dio_aio_complete_work
RIP: 0010:check_flush_dependency+0x329/0x3c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3708'>kernel/workqueue.c:3708</a>
Code: 08 4c 89 f7 e8 e8 f6 9d 00 49 8b 16 49 81 c4 78 01 00 00 48 c7 c7 20 d6 09 8c 4c 89 ee 4c 89 e1 4c 8b 04 24 e8 38 3f f8 ff 90 &lt;0f&gt; 0b 90 90 e9 4a ff ff ff 89 d9 80 e1 07 80 c1 03 38 c1 0f 8c 09
RSP: 0018:ffffc900000d77c0 EFLAGS: 00010046
RAX: 026468fd203def00 RBX: ffff888031531808 RCX: ffff88801d2c5a00
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000000
RBP: 0000000000000008 R08: ffffffff817feaa2 R09: fffffbfff1cfa1a8
R10: dffffc0000000000 R11: fffffbfff1cfa1a8 R12: ffff88801ac81578
R13: ffff8880325f5d78 R14: ffff88801cad8718 R15: ffff88801cad8720
FS:  0000000000000000(0000) GS:ffff8880b8600000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000000000000 CR3: 0000000075182000 CR4: 00000000003526f0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
 &lt;TASK&gt;
 start_flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4162'>kernel/workqueue.c:4162</a> [inline]
 __flush_work+0x286/0xc60 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4199'>kernel/workqueue.c:4199</a>
 flush_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4256'>kernel/workqueue.c:4256</a> [inline]
 flush_delayed_work+0x169/0x1c0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n4278'>kernel/workqueue.c:4278</a>
 hfs_file_fsync+0xea/0x140 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/hfs/inode.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n680'>fs/hfs/inode.c:680</a>
 generic_write_sync <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/include/linux/fs.h?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n2952'>include/linux/fs.h:2952</a> [inline]
 dio_complete+0x55c/0x6b0 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/fs/direct-io.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n313'>fs/direct-io.c:313</a>
 process_one_work <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3229'>kernel/workqueue.c:3229</a> [inline]
 process_scheduled_works+0xa66/0x1840 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3310'>kernel/workqueue.c:3310</a>
 worker_thread+0x870/0xd30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/workqueue.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n3391'>kernel/workqueue.c:3391</a>
 kthread+0x7a9/0x920 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/kernel/kthread.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n464'>kernel/kthread.c:464</a>
 ret_from_fork+0x4b/0x80 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/kernel/process.c?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n148'>arch/x86/kernel/process.c:148</a>
 ret_from_fork_asm+0x1a/0x30 <a href='https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/arch/x86/entry/entry_64.S?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2#n244'>arch/x86/entry/entry_64.S:244</a>
 &lt;/TASK&gt;
</pre></div><br>
	

	

<table class="list_table">
	<caption>Crashes (6):</caption>
		<thead>
		<tr>
			<th><a onclick="return sortTable(this, 'Time', textSort, true)" href="#">Time</a></th>
			<th><a onclick="return sortTable(this, 'Kernel', textSort)" href="#">Kernel</a></th>
			<th><a onclick="return sortTable(this, 'Commit', textSort)" href="#">Commit</a></th>
			<th><a onclick="return sortTable(this, 'Syzkaller', textSort)" href="#">Syzkaller</a></th>
			<th><a onclick="return sortTable(this, 'Config', textSort)" href="#">Config</a></th>
			<th><a onclick="return sortTable(this, 'Log', textSort)" href="#">Log</a></th>
			<th><a onclick="return sortTable(this, 'Report', reproSort)" href="#">Report</a></th>
			<th><a onclick="return sortTable(this, 'Syz repro', reproSort)" href="#">Syz repro</a></th>
			<th><a onclick="return sortTable(this, 'C repro', textSort)" href="#">C repro</a></th>
			<th><a onclick="return sortTable(this, 'VM info', textSort)" href="#">VM info</a></th>
			<th><a onclick="return sortTable(this, 'Assets', textSort)" href="#">Assets</a> (<a href="https://github.com/google/syzkaller/blob/master/docs/syzbot_assets.md">help?</a>)</th>
			<th><a onclick="return sortTable(this, 'Manager', textSort)" href="#">Manager</a></th>
			<th><a onclick="return sortTable(this, 'Title', textSort)" href="#">Title</a></th>
		</tr>
		</thead>
		<tbody>
		
		<tr>
			<td class="time">2024/12/31 03:51</td>
			<td class="kernel" title="linux-next">linux-next</td>
			<td class="tag" title="8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2
	2024/12/20 05:19"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/log/?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2">8155b4ef3466</a></td>
			<td class="tag"><a href="https://github.com/google/syzkaller/commits/d3ccff6372e07c6aabd02b5da419aa6492b5f0ad">d3ccff63</a></td>
			<td class="config"><a href="/text?tag=KernelConfig&amp;x=9c90bb7161a56c88">.config</a></td>
			<td class="repro"><a href="/text?tag=CrashLog&amp;x=15b4eac4580000">console log</a></td>
			<td class="repro"><a href="/text?tag=CrashReport&amp;x=10a688b0580000">report</a></td>
			<td class="repro">
				<a href="/text?tag=ReproSyz&amp;x=136beaf8580000">syz</a>
				 / <a href="/text?tag=ReproLog&amp;x=11c766df980000">log</a>
			</td>
			<td class="repro"><a href="/text?tag=ReproC&amp;x=16491818580000">C</a></td>
			<td class="repro"></td>
			<td class="assets">
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/98a974fc662d/disk-8155b4ef.raw.xz">disk image</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/2dea9b72f624/vmlinux-8155b4ef.xz">vmlinux</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/593a42b9eb34/bzImage-8155b4ef.xz">kernel image</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/b18faca00a0e/mount_0.gz">mounted in repro</a>]</span>
			</td>
			<td class="manager">ci-upstream-linux-next-kasan-gce-root</td>
			<td class="manager">possible deadlock in rpm_suspend</td>
		</tr>
		
		<tr>
			<td class="time">2025/01/10 10:02</td>
			<td class="kernel" title="upstream">upstream</td>
			<td class="tag" title="2144da25584eb10b84252230319b5783f6a83041
	2025/01/10 02:19"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/log/?id=2144da25584eb10b84252230319b5783f6a83041">2144da25584e</a></td>
			<td class="tag"><a href="https://github.com/google/syzkaller/commits/67d7ec0a69193b2acbb8cdb5109d5505a9128ac5">67d7ec0a</a></td>
			<td class="config"><a href="/text?tag=KernelConfig&amp;x=4ef22c4fce5135b4">.config</a></td>
			<td class="repro"><a href="/text?tag=CrashLog&amp;x=126fb4b0580000">console log</a></td>
			<td class="repro"><a href="/text?tag=CrashReport&amp;x=1382a218580000">report</a></td>
			<td class="repro">
				
				
			</td>
			<td class="repro"></td>
			<td class="repro"><a href="/text?tag=MachineInfo&amp;x=6cd44e7f895bfe61">info</a></td>
			<td class="assets">
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/b0adb78a6d8b/disk-2144da25.raw.xz">disk image</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/2bcb78d7e6d9/vmlinux-2144da25.xz">vmlinux</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/e8064748154a/bzImage-2144da25.xz">kernel image</a>]</span>
			</td>
			<td class="manager">ci-upstream-kasan-gce-root</td>
			<td class="manager">possible deadlock in rpm_suspend</td>
		</tr>
		
		<tr>
			<td class="time">2025/01/02 00:41</td>
			<td class="kernel" title="linux-next">linux-next</td>
			<td class="tag" title="8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2
	2024/12/20 05:19"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/log/?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2">8155b4ef3466</a></td>
			<td class="tag"><a href="https://github.com/google/syzkaller/commits/d3ccff6372e07c6aabd02b5da419aa6492b5f0ad">d3ccff63</a></td>
			<td class="config"><a href="/text?tag=KernelConfig&amp;x=9c90bb7161a56c88">.config</a></td>
			<td class="repro"><a href="/text?tag=CrashLog&amp;x=1106b818580000">console log</a></td>
			<td class="repro"><a href="/text?tag=CrashReport&amp;x=10ac36df980000">report</a></td>
			<td class="repro">
				
				
			</td>
			<td class="repro"></td>
			<td class="repro"><a href="/text?tag=MachineInfo&amp;x=4c2f4e5503e28060">info</a></td>
			<td class="assets">
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/98a974fc662d/disk-8155b4ef.raw.xz">disk image</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/2dea9b72f624/vmlinux-8155b4ef.xz">vmlinux</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/593a42b9eb34/bzImage-8155b4ef.xz">kernel image</a>]</span>
			</td>
			<td class="manager">ci-upstream-linux-next-kasan-gce-root</td>
			<td class="manager">possible deadlock in rpm_suspend</td>
		</tr>
		
		<tr>
			<td class="time">2024/12/25 21:23</td>
			<td class="kernel" title="linux-next">linux-next</td>
			<td class="tag" title="8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2
	2024/12/20 05:19"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/log/?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2">8155b4ef3466</a></td>
			<td class="tag"><a href="https://github.com/google/syzkaller/commits/444551c40edde85b5e4900ae27d432bd1da7079c">444551c4</a></td>
			<td class="config"><a href="/text?tag=KernelConfig&amp;x=9c90bb7161a56c88">.config</a></td>
			<td class="repro"><a href="/text?tag=CrashLog&amp;x=15820cc4580000">console log</a></td>
			<td class="repro"><a href="/text?tag=CrashReport&amp;x=126062f8580000">report</a></td>
			<td class="repro">
				
				
			</td>
			<td class="repro"></td>
			<td class="repro"><a href="/text?tag=MachineInfo&amp;x=5a7261ef4190e515">info</a></td>
			<td class="assets">
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/98a974fc662d/disk-8155b4ef.raw.xz">disk image</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/2dea9b72f624/vmlinux-8155b4ef.xz">vmlinux</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/593a42b9eb34/bzImage-8155b4ef.xz">kernel image</a>]</span>
			</td>
			<td class="manager">ci-upstream-linux-next-kasan-gce-root</td>
			<td class="manager">possible deadlock in rpm_suspend</td>
		</tr>
		
		<tr>
			<td class="time">2024/12/24 17:42</td>
			<td class="kernel" title="linux-next">linux-next</td>
			<td class="tag" title="8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2
	2024/12/20 05:19"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/log/?id=8155b4ef3466f0e289e8fcc9e6e62f3f4dceeac2">8155b4ef3466</a></td>
			<td class="tag"><a href="https://github.com/google/syzkaller/commits/444551c40edde85b5e4900ae27d432bd1da7079c">444551c4</a></td>
			<td class="config"><a href="/text?tag=KernelConfig&amp;x=9c90bb7161a56c88">.config</a></td>
			<td class="repro"><a href="/text?tag=CrashLog&amp;x=13b2b4c4580000">console log</a></td>
			<td class="repro"><a href="/text?tag=CrashReport&amp;x=107cc2f8580000">report</a></td>
			<td class="repro">
				
				
			</td>
			<td class="repro"></td>
			<td class="repro"><a href="/text?tag=MachineInfo&amp;x=ae8f3b63298cf7f5">info</a></td>
			<td class="assets">
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/98a974fc662d/disk-8155b4ef.raw.xz">disk image</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/2dea9b72f624/vmlinux-8155b4ef.xz">vmlinux</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/593a42b9eb34/bzImage-8155b4ef.xz">kernel image</a>]</span>
			</td>
			<td class="manager">ci-upstream-linux-next-kasan-gce-root</td>
			<td class="manager">possible deadlock in rpm_suspend</td>
		</tr>
		
		<tr>
			<td class="time">2024/12/18 08:44</td>
			<td class="kernel" title="linux-next">linux-next</td>
			<td class="tag" title="7fa366f1b6e376c38966faa42da7f0f2e013fdab
	2024/12/18 04:30"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/log/?id=7fa366f1b6e376c38966faa42da7f0f2e013fdab">7fa366f1b6e3</a></td>
			<td class="tag"><a href="https://github.com/google/syzkaller/commits/a0626d3a05d5e31af100787b6749f0b89416c171">a0626d3a</a></td>
			<td class="config"><a href="/text?tag=KernelConfig&amp;x=26a4b4cc7f877b28">.config</a></td>
			<td class="repro"><a href="/text?tag=CrashLog&amp;x=13580cf8580000">console log</a></td>
			<td class="repro"><a href="/text?tag=CrashReport&amp;x=15fd42df980000">report</a></td>
			<td class="repro">
				
				
			</td>
			<td class="repro"></td>
			<td class="repro"><a href="/text?tag=MachineInfo&amp;x=749f77705f00c86b">info</a></td>
			<td class="assets">
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/76406ccde331/disk-7fa366f1.raw.xz">disk image</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/49c56a285987/vmlinux-7fa366f1.xz">vmlinux</a>]</span>
			
				<span class="no-break">[<a href="https://storage.googleapis.com/syzbot-assets/92d20cf0cd8a/bzImage-7fa366f1.xz">kernel image</a>]</span>
			</td>
			<td class="manager">ci-upstream-linux-next-kasan-gce-root</td>
			<td class="manager">possible deadlock in rpm_suspend</td>
		</tr>
		
		</tbody>
</table>
<i>* <s>Struck through</s> repros no longer work on HEAD.</i>


</body>
</html>
